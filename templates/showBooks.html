<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add-Section</title>
    <link rel="stylesheet" href="/static/add-section.css" />
    {% include 'bootstrap.html' %}
  </head>
  <body>
    <div>
      {% include 'header.html' %}
      <div>
        <div class="main-container">
          {% for book in books %}
          <div class="section-container" id="1">
            <h2>{{book.BookId}} {{book.Title}}</h2>
            <p>Book Author : {{book.Author}}</p>
            <div>
              <p>Book Section : {{book.SectionId}}</p>
            </div>
            <button type="button" id="showBook{{book.BookId}}" class="btn btn-outline-primary">
              Show
            </button>
            <button
              type="button"
              id="editBooks{{book.BookId}}"
              class="btn btn-outline-secondary"
            >
              Edit
            </button>
            <button type="button" class="btn btn-outline-danger">Delete</button>
          </div>
          {% include 'editBookPopup.html' %} 
          <div id="showBooksPopup{{book.BookId}}" class="popup">
  <div class="popup-content">
    <h1>History Book class 10</h1>
    <div id="current-section">
      <h4>Book Author : John Doe</h4>
      <h4>Book Section : History</h4>
      <h4>Link : www.demo.com/placeholder</h4>
      <div class="buttons">
        <button class="btn btn-outline-primary">save</button>
        <button class="btn btn-primary" id="closeShowBooksPopup{{book.BookId}}">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

          {% endfor %}
      </div>
      {% include 'footer.html' %}
    </div>
    <script>
      const mainContainer = document.querySelector(".main-container");

      mainContainer.addEventListener("click", function (event) {
        if (event.target.matches('[id^="showBook"]')) {
          const sectionId = event.target.id.replace("showBook", "");
          const popupId = `showBooksPopup${sectionId}`;
          const showBooksPopup = document.getElementById(popupId);
          if (showBooksPopup) {
            showBooksPopup.classList.toggle("show");
          }
        }
      });

      const closeShowBooksPopups = document.querySelectorAll(
        '[id^="closeShowBooksPopup"]'
      );

      closeShowBooksPopups.forEach(function (closeButton) {
        closeButton.addEventListener("click", function () {
          const showBooksPopup =
            closeButton.parentElement.parentElement.parentElement;

          if (showBooksPopup) {
            showBooksPopup.classList.remove("show");
          }
        });
      });
    </script>
  </body>
</html>
